dist: bionic

language: python
python: "{{ cookiecutter.python_version }}"

services:
  - docker

install:
  - pip install tox==3.*

env:
{% for version in cookiecutter.ansible_versions.split(',') %}
  - TOX_ENV: ansible{{ version | replace('.', '') }}
{% endfor %}

script:
  - tox --workdir $(mktemp -d) -e ${TOX_ENV}

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
